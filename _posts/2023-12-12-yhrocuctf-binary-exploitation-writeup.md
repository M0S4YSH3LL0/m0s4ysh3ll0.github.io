---
layout: post
title: YHROCUCTF writeup - Binary Challenge 4
subtitle: My first touch with pwntools and ROP
#gh-repo: daattali/beautiful-jekyll
#gh-badge: [star, fork, follow]
tags: [ctf, writeup, pwn, rop]
comments: true
author: M0S4YSH3LL0
---

## Prologue

I took part in the CTF event of **YHROCU** (Yorkshire and Hamold Organised Crime Unit), the [YHROCUCTF](https://yhrocuctf.com/). It was super fun, most of all the binary exploitation challenge they provided. For this reason I want to do this writeup to let you guys be part of my thinking and learning process.

## The challenge

The description of the challenge is as follows:
```
Use the "binary-exploit-4" program to gain the privileges of ctf-flag-4, once you have them run "newgrp" to be able to read the flag.

If you get the flag, Joe owes you a pint (as long as you explain how you did it + save your exploit to show him).

Seriously, fair play.

....good luck
```

You can download the binary [here]().

The challenge originally is hosted on a remote host, but I don't want to expose any credentials here, so for the real flag you need to sign up to the CTF's page.


## Analyising the binary

First let's check what we have here:

{{ "{% highlight bash " }}%}
┌──(root㉿aab1ad1b0cfe)-[~/learning/yhrocuctf/binary-exploitation]
└─# file binary-exploit-4 
binary-exploit-4: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=f1b4bbf4c34b712b7ede57d6865746f8fb057424, for GNU/Linux 3.2.0, not stripped
{{ "{% endhighlight " }}%}

As we can see, we are working with a `64-bit` executable which is not stripped, meaning we get some debugging symbols while analysing it with `gdb` later, sweet.

## Let's write our exploit

## Things I still don't understand lol

## Epilogue

Here's a table:

| Number | Next number | Previous number |
| :------ |:--- | :--- |
| Five | Six | Four |
| Ten | Eleven | Nine |
| Seven | Eight | Six |
| Two | Three | One |

How about a yummy crepe?

![Crepe](https://beautifuljekyll.com/assets/img/crepe.jpg)

It can also be centered!

![Crepe](https://beautifuljekyll.com/assets/img/crepe.jpg){: .mx-auto.d-block :}

Here's a code chunk:

~~~
var foo = function(x) {
  return(x + 5);
}
foo(3)
~~~

And here is the same code with syntax highlighting:

```javascript
var foo = function(x) {
  return(x + 5);
}
foo(3)
```

And here is the same code yet again but with line numbers:

{% highlight javascript linenos %}
var foo = function(x) {
  return(x + 5);
}
foo(3)
{% endhighlight %}

## Boxes
You can add notification, warning and error boxes like this:

### Notification

{: .box-note}
**Note:** This is a notification box.

### Warning

{: .box-warning}
**Warning:** This is a warning box.

### Error

{: .box-error}
**Error:** This is an error box.

## Local URLs in project sites {#local-urls}

When hosting a *project site* on GitHub Pages (for example, `https://USERNAME.github.io/MyProject`), URLs that begin with `/` and refer to local files may not work correctly due to how the root URL (`/`) is interpreted by GitHub Pages. You can read more about it [in the FAQ](https://beautifuljekyll.com/faq/#links-in-project-page). To demonstrate the issue, the following local image will be broken **if your site is a project site:**

![Crepe](/assets/img/crepe.jpg)

If the above image is broken, then you'll need to follow the instructions [in the FAQ](https://beautifuljekyll.com/faq/#links-in-project-page). Here is proof that it can be fixed:

![Crepe]({{ '/assets/img/crepe.jpg' | relative_url }})
